<!DOCTYPE html>
<html>
  <head>
    <title>Parlinator</title>
    <style type="text/css">
      body {
        background-image:url(background.jpg);
        background-repeat:no-repeat;
        background-position:center top;
      }
      #churchill {
        width:62.50em;
        height:37.500em;
        margin-left:auto;
        margin-right:auto;
        margin-top:-4px;
        z-index:-1;
      }
    </style>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript">
      $(function() {
          window.answers = {};
          $('.answer').live('click', function() {
            window.answers[window.question_id] = $(this).text();
            send_data();
          });
          send_data();
          function send_data() {
            $.ajax({
              url: "/api",
              dataType: 'json',
              data: window.answers,
              success: function(data) {
                if (data['error']) {
                  $('#question').hide();
                  $('#answers').hide();
                  $('#result').text("Error: " + data['error']);
                  $('#result').show();
                } else if (data['success']) {
                  $('#question').hide();
                  $('#answers').hide();
                  $('#result').text(data['success']);
                  $('#result').show();
                } else {
                  window.question_id = data['question_id']
                  $('#question').text(data['question']);
                  $('#answers').html('');
                  $.each(data['answers'], function(i, answer) {
                    $('#answers').append("<div class='answer'>" + answer + "</div>");
                  });
                }
              }
            });
          }
      });
    </script>
  </head>
  <body>
    <div id="churchill">
    <img src="churchill.jpg"/>
    </div>
    <div id="question">
    </div>
    <div id="answers">
    </div>
    <div id="results">
    </div>
  </body>
</html>
